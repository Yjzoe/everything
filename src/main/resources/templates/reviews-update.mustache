{{>layout/header}}
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script>
    $(function () {
        var category = "{{review.category}}"
        $('select.category option[value=' + category + ']').attr('selected', 'selected');
        var rate = "{{review.rate}}"
        $('input:radio[name=rate]:input[value='+rate+']').attr("checked",true)

        $('#btn-img-del').on('click', function () {
            $('#uploadedImg').remove()
            $('#oldFile').val("")
        })
    })
</script>
<br/>
<h1 align="center">Edit</h1>
<br/>
    <form>
    <div class="container">
    <div class="row">
        <div class="col-3">
            <input type="hidden" id="id" value="{{review.id}}">
            <div class="form-group">
            <label for="category">Category</label>
            <select class="category" name="category" id="category">
                <option value="movie">영화</option>
                <option value="book">책</option>
                <option value="tvshow">TV프로그램</option>
            </select>
            </div>
        </div>
        <div class="col-9">
            <div class="form-group">
                <label for="title">Title</label>
                <input type="text" class="form-control" id="title" value="{{review.title}}">
            </div>
        </div>
    </div>
        <div class="form-group">
            <label for="content">Content</label>
            <textarea class="form-control" id="content">{{review.content}}</textarea>
        </div>
        <div class="form-group">
            <label for="rate">Rate</label><br/>
            <div class="rate">
                <input type="radio" class="rate" id="star5" name="rate" value="5" />
                <label for="star5" title="text">5 stars</label>
                <input type="radio" class="rate" id="star4" name="rate" value="4" />
                <label for="star4" title="text">4 stars</label>
                <input type="radio" class="rate" id="star3" name="rate" value="3" />
                <label for="star3" title="text">3 stars</label>
                <input type="radio" class="rate" id="star2" name="rate" value="2" />
                <label for="star2" title="text">2 stars</label>
                <input type="radio" class="rate" id="star1" name="rate" value="1"/>
                <label for="star1" title="text">1 star</label>
            </div>
        </div>
        <br/>
        <br/>
        <div class="form-group">
            <label for="oneSentence">One Sentence</label>
            <input type="text" class="form-control" id="oneSentence" value="{{review.oneSentence}}">
        </div>
        {{#img}}
        <div id="uploadedImg">
        <img src="/uploads/{{review.img}}" width="200px"/> <button id="btn-img-del">-</button><br/>
        </div>
        <br/>
        <input type="hidden" id="oldFile" value="{{review.img}}">
        <input type="file" id="newFile"/>
        {{/img}}
        {{^img}}
            <input type="file" id="newFile"/>
        {{/img}}
        </form>
        <br/>
        <br/>
        <a href="/" role="button" class="btn btn-secondary">Cancel</a>
        <button type="button" class="btn btn-primary" id="btn-update">Edit</button>
        <button type="button" class="btn btn-danger" id="btn-delete">Delete</button>
    </div>
</div>
{{>layout/footer}}